<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”²éª¨æ–‡å­¦ä¹  - å­¦é¾„å‰å„¿ç«¥æ±‰å­—å¯è’™</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .age-selector {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 8px 0;
            flex-wrap: wrap;
        }
        
        .age-btn {
            padding: 10px 20px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #4CAF50;
            background: linear-gradient(135deg, #81C784, #4CAF50);
            color: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .age-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        
        .age-btn.active {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            border-color: #FF9800;
        }
        
        .age-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .age-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .character-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 0.5px;
            margin: 1px 0;
            padding: 0;
            max-height: none;
            overflow: visible;
            width: 100%;
            box-sizing: border-box;
        }
        
        /* å¹´é¾„ç»„ç‰¹å®šå¸ƒå±€ */
        #grid-2 {
            /* 2å²ç»„ï¼š10ä¸ªå­—ï¼Œ1è¡Œ */
            grid-template-rows: repeat(1, 1fr);
        }
        
        #grid-3 {
            /* 3å²ç»„ï¼š20ä¸ªå­—ï¼Œ2è¡Œ */
            grid-template-rows: repeat(2, 1fr);
        }
        
        #grid-4 {
            /* 4å²ç»„ï¼š30ä¸ªå­—ï¼Œ3è¡Œ */
            grid-template-rows: repeat(3, 1fr);
        }
        
        #grid-5 {
            /* 5å²ç»„ï¼š40ä¸ªå­—ï¼Œ5è¡Œ */
            grid-template-rows: repeat(5, 1fr);
        }
        
        /* å¹³æ¿ç”µè„‘é€‚é… */
        @media (max-width: 1024px) {
            .character-grid {
                grid-template-columns: repeat(10, 1fr);
                gap: 0.5px;
            }
            
            .character-card {
                min-height: 42px;
                padding: 1px;
            }
        }
        
        @media (max-width: 768px) {
            .character-grid {
                grid-template-columns: repeat(10, 1fr);
                gap: 0.5px;
            }
            
            .character-card {
                min-height: 40px;
                padding: 0.5px;
            }
            
            .character-display {
                font-size: 16px;
            }
            
            .character-info {
                font-size: 5px;
            }
        }
        
        .character-card {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border: 1px solid #2196F3;
            border-radius: 3px;
            padding: 1px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 45px;
            box-sizing: border-box;
            width: 100%;
            margin: 0;
            max-width: 100%;
            overflow: hidden;
        }
        
        .character-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            border-color: #FF9800;
        }
        
        .character-display {
            font-size: 18px;
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 0;
            font-family: 'FangZhengOracle', 'ZhongYanYuan', 'OeasyOracle', serif;
            line-height: 1;
        }
        
        @media (max-width: 1024px) {
            .character-display {
                font-size: 20px;
                margin-bottom: 2px;
            }
        }
        
        @media (max-width: 768px) {
            .character-display {
                font-size: 18px;
                margin-bottom: 1px;
            }
        }
        
        .character-info {
            font-size: 6px;
            color: #424242;
            line-height: 0.9;
        }
        
        @media (max-width: 1024px) {
            .character-info {
                font-size: 7px;
            }
        }
        
        @media (max-width: 768px) {
            .character-info {
                font-size: 6px;
            }
        }
        
        .character-pronunciation {
            font-weight: bold;
            color: #E91E63;
            margin-bottom: 2px;
        }
        
        .character-meaning {
            color: #666;
        }
        
        .section-title {
            text-align: center;
            font-size: 22px;
            color: #2E7D32;
            margin: 6px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .main-title {
            text-align: center;
            font-size: 42px;
            color: #1976D2;
            margin: 30px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            text-align: center;
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }
        
        body {
            background: linear-gradient(135deg, #F8F9FA, #E9ECEF);
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 8px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            height: calc(100vh - 16px);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .age-section {
            flex: 1;
            overflow: visible;
            display: none;
        }
        
        .age-section.active {
            display: flex;
            flex-direction: column;
        }
        
        /* éŸ³é¢‘æ§åˆ¶æ ·å¼ */
        .audio-controls {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 6px;
            margin-bottom: 4px;
            padding: 3px 8px;
        }
        
        .volume-icon {
            font-size: 20px;
            cursor: pointer;
            user-select: none;
        }
        
        .volume-slider {
            width: 100px;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            cursor: pointer;
        }
        
        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgmAudio" loop preload="auto">
        <source src="audio/bgm.mp3" type="audio/mpeg">
    </audio>
    
    <!-- åº†ç¥éŸ³æ•ˆ -->
    <audio id="passAudio" preload="auto">
        <source src="audio/pass.mp3" type="audio/mpeg">
    </audio>
    
    <!-- ä¹¦å†™éŸ³æ•ˆ -->
    <audio id="slashAudio" loop preload="auto">
        <source src="audio/slash.mp3" type="audio/mpeg">
    </audio>
    
    <div class="container">
        <!-- éŸ³é‡æ§åˆ¶ -->
        <div class="audio-controls">
            <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
        </div>
        
        <div class="age-selector">
            <button class="age-btn active" onclick="showAge(2)">ğŸ‘¶ 2å² (10å­—)</button>
            <button class="age-btn" onclick="showAge(3)">ğŸ§’ 3å² (20å­—)</button>
            <button class="age-btn" onclick="showAge(4)">ğŸ‘¦ 4å² (30å­—)</button>
            <button class="age-btn" onclick="showAge(5)">ğŸ‘§ 5å² (40å­—)</button>
        </div>
        
        <!-- 2å²æ±‰å­— -->
        <div id="age-2" class="age-section active">
            <h2 class="section-title">ğŸ‘¶ 2å²å®å®å­¦æ±‰å­— (10ä¸ªå­— - 1è¡Œ)</h2>
            <div class="character-grid" id="grid-2"></div>
        </div>
        
        <!-- 3å²æ±‰å­— -->
        <div id="age-3" class="age-section">
            <h2 class="section-title">ğŸ§’ 3å²å°æœ‹å‹å­¦æ±‰å­— (20ä¸ªå­— - 2è¡Œ)</h2>
            <div class="character-grid" id="grid-3"></div>
        </div>
        
        <!-- 4å²æ±‰å­— -->
        <div id="age-4" class="age-section">
            <h2 class="section-title">ğŸ‘¦ 4å²å°æœ‹å‹å­¦æ±‰å­— (30ä¸ªå­— - 3è¡Œ)</h2>
            <div class="character-grid" id="grid-4"></div>
        </div>
        
        <!-- 5å²æ±‰å­— -->
        <div id="age-5" class="age-section">
            <h2 class="section-title">ğŸ‘§ 5å²å°æœ‹å‹å­¦æ±‰å­— (40ä¸ªå­— - 5è¡Œ)</h2>
            <div class="character-grid" id="grid-5"></div>
        </div>
    </div>
    
    <script>
        // å¹´é¾„æ®µæ±‰å­—æ•°æ®ï¼ˆæ¯ä¸ªå¹´é¾„æ®µçš„æ±‰å­—ä¸é‡å¤ï¼‰
        const ageCharacters = {
            2: ['ä¸€', 'äºŒ', 'ä¸‰', 'äºº', 'å¤§', 'å°', 'ç›®', 'æ‰‹', 'æ—¥', 'æœˆ'],
            3: ['å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'å£', 'è€³', 'å¿ƒ', 'æœ¨', 'ç«', 'æ°´', 'åœŸ', 'å¤©', 'ä¸Š', 'ä¸‹', 'é‡‘', 'å·¥', 'å‚'],
            4: ['ç‰›', 'é©¬', 'ç¾Š', 'çŠ¬', 'é¸Ÿ', 'è™«', 'çˆ¶', 'æ¯', 'å­', 'å¥³', 'ç”°', 'è€', 'å…¥', 'ä¸œ', 'è¥¿', 'å—', 'åŒ—', 'ç™½', 'ç”µ', 'åˆ€', 'å¼“', 'çŸ¢', 'ç½‘', 'çŸ³', 'å…„', 'è‡ª', 'ç‰™', 'çˆª', 'å†…', 'å¤–'],
            5: ['æˆ·', 'ç±³', 'ç¦¾', 'è±†', 'ç“œ', 'æœ', 'èŠ±', 'å¶', 'è´', 'è¡£', 'é£Ÿ', 'è¡Œ', 'äº‘', 'é›¨', 'é›ª', 'é£', 'æ°”', 'åŠ›', 'ç«¹', 'ä¸', 'è¡€', 'éª¨', 'è‚‰', 'çš®', 'æ¯›', 'èº«', 'å¤´', 'è¶³', 'ç«‹', 'è§', 'è¨€', 'æ­¢', 'ä¸­', 'å¼Ÿ', 'é’', 'å±®', 'å±±', 'å·', 'äº•', 'é±¼']
        };
        
        // æ±‰å­—ä¿¡æ¯æ•°æ®åº“ï¼ˆæ‰©å±•ç‰ˆï¼‰
        const characterInfo = {
            'ä¸€': { pronunciation: 'yÄ«', meaning: 'æ•°å­—ä¸€' },
            'äºŒ': { pronunciation: 'Ã¨r', meaning: 'æ•°å­—äºŒ' },
            'ä¸‰': { pronunciation: 'sÄn', meaning: 'æ•°å­—ä¸‰' },
            'äºº': { pronunciation: 'rÃ©n', meaning: 'äººç±»' },
            'å¤§': { pronunciation: 'dÃ ', meaning: 'å¤§çš„' },
            'å°': { pronunciation: 'xiÇo', meaning: 'å°çš„' },
            'ç›®': { pronunciation: 'mÃ¹', meaning: 'çœ¼ç›' },
            'æ‰‹': { pronunciation: 'shÇ’u', meaning: 'æ‰‹æŒ' },
            'æ—¥': { pronunciation: 'rÃ¬', meaning: 'å¤ªé˜³' },
            'æœˆ': { pronunciation: 'yuÃ¨', meaning: 'æœˆäº®' },
            'å››': { pronunciation: 'sÃ¬', meaning: 'æ•°å­—å››' },
            'äº”': { pronunciation: 'wÇ”', meaning: 'æ•°å­—äº”' },
            'å…­': { pronunciation: 'liÃ¹', meaning: 'æ•°å­—å…­' },
            'ä¸ƒ': { pronunciation: 'qÄ«', meaning: 'æ•°å­—ä¸ƒ' },
            'å…«': { pronunciation: 'bÄ', meaning: 'æ•°å­—å…«' },
            'ä¹': { pronunciation: 'jiÇ”', meaning: 'æ•°å­—ä¹' },
            'å': { pronunciation: 'shÃ­', meaning: 'æ•°å­—å' },
            'å£': { pronunciation: 'kÇ’u', meaning: 'å˜´å·´' },
            'è€³': { pronunciation: 'Ä›r', meaning: 'è€³æœµ' },
            'å¿ƒ': { pronunciation: 'xÄ«n', meaning: 'å¿ƒè„' },
            'æœ¨': { pronunciation: 'mÃ¹', meaning: 'æ ‘æœ¨' },
            'ç«': { pronunciation: 'huÇ’', meaning: 'ç«ç„°' },
            'æ°´': { pronunciation: 'shuÇ', meaning: 'æ°´' },
            'åœŸ': { pronunciation: 'tÇ”', meaning: 'åœŸåœ°' },
            'å±±': { pronunciation: 'shÄn', meaning: 'å±±å³°' },
            'å¤©': { pronunciation: 'tiÄn', meaning: 'å¤©ç©º' },
            'ä¸Š': { pronunciation: 'shÃ ng', meaning: 'ä¸Šé¢' },
            'ä¸‹': { pronunciation: 'xiÃ ', meaning: 'ä¸‹é¢' },
            'ä¸­': { pronunciation: 'zhÅng', meaning: 'ä¸­é—´' },
            'ç‰›': { pronunciation: 'niÃº', meaning: 'ç‰›' },
            'é©¬': { pronunciation: 'mÇ', meaning: 'é©¬' },
            'ç¾Š': { pronunciation: 'yÃ¡ng', meaning: 'ç¾Š' },
            'çŠ¬': { pronunciation: 'quÇn', meaning: 'ç‹—' },
            'é¸Ÿ': { pronunciation: 'niÇo', meaning: 'é¸Ÿ' },
            'è™«': { pronunciation: 'chÃ³ng', meaning: 'è™«å­' },
            'ç”µ': { pronunciation: 'diÃ n', meaning: 'é—ªç”µ' },
            'çˆ¶': { pronunciation: 'fÃ¹', meaning: 'çˆ¶äº²' },
            'æ¯': { pronunciation: 'mÇ”', meaning: 'æ¯äº²' },
            'å­': { pronunciation: 'zÇ', meaning: 'å„¿å­' },
            'å¥³': { pronunciation: 'nÇš', meaning: 'å¥³å„¿' },
            'è€': { pronunciation: 'lÇo', meaning: 'å¹´è€' },
            'å…¥': { pronunciation: 'rÃ¹', meaning: 'è¿›å…¥' },
            'å·¦': { pronunciation: 'zuÇ’', meaning: 'å·¦è¾¹' },
            'å³': { pronunciation: 'yÃ²u', meaning: 'å³è¾¹' },

            'ä¸œ': { pronunciation: 'dÅng', meaning: 'ä¸œæ–¹' },
            'è¥¿': { pronunciation: 'xÄ«', meaning: 'è¥¿æ–¹' },
            'å—': { pronunciation: 'nÃ¡n', meaning: 'å—æ–¹' },
            'åŒ—': { pronunciation: 'bÄ›i', meaning: 'åŒ—æ–¹' },
            'ç™½': { pronunciation: 'bÃ¡i', meaning: 'ç™½è‰²' },
            'æˆ·': { pronunciation: 'hÃ¹', meaning: 'é—¨æˆ·' },





            'ç”°': { pronunciation: 'tiÃ¡n', meaning: 'ç”°åœ°' },
            'ç±³': { pronunciation: 'mÇ', meaning: 'ç±³ç²’' },
            'ç¦¾': { pronunciation: 'hÃ©', meaning: 'ç¦¾è‹—' },

            'è±†': { pronunciation: 'dÃ²u', meaning: 'è±†å­' },
            'ç“œ': { pronunciation: 'guÄ', meaning: 'ç“œæœ' },
            'æœ': { pronunciation: 'guÇ’', meaning: 'æœå®' },
            'èŠ±': { pronunciation: 'huÄ', meaning: 'èŠ±æœµ' },

            'å¶': { pronunciation: 'yÃ¨', meaning: 'å¶å­' },

            'çŸ³': { pronunciation: 'shÃ­', meaning: 'çŸ³å¤´' },
            'é‡‘': { pronunciation: 'jÄ«n', meaning: 'é‡‘å­' },

            'è´': { pronunciation: 'bÃ¨i', meaning: 'è´å£³' },

            'è¡£': { pronunciation: 'yÄ«', meaning: 'è¡£æœ' },
            'é£Ÿ': { pronunciation: 'shÃ­', meaning: 'é£Ÿç‰©' },

            'è¡Œ': { pronunciation: 'xÃ­ng', meaning: 'è¡Œèµ°' },


            'å¬': { pronunciation: 'tÄ«ng', meaning: 'å¬è§' },
            'çœ‹': { pronunciation: 'kÃ n', meaning: 'çœ‹è§' },
            'äº‘': { pronunciation: 'yÃºn', meaning: 'äº‘æœµ' },
            'é›¨': { pronunciation: 'yÇ”', meaning: 'é›¨æ°´' },
            'é›ª': { pronunciation: 'xuÄ›', meaning: 'é›ªèŠ±' },
            'é£': { pronunciation: 'fÄ“ng', meaning: 'é£' },
            'æ°”': { pronunciation: 'qÃ¬', meaning: 'æ°”ä½“' },
            'åŠ›': { pronunciation: 'lÃ¬', meaning: 'åŠ›æ°”' },
            'ç«¹': { pronunciation: 'zhÃº', meaning: 'ç«¹å­' },
            'ä¸': { pronunciation: 'sÄ«', meaning: 'ä¸çº¿' },
            'è¡€': { pronunciation: 'xuÃ¨', meaning: 'è¡€æ¶²' },
            'éª¨': { pronunciation: 'gÇ”', meaning: 'éª¨å¤´' },
            'è‚‰': { pronunciation: 'rÃ²u', meaning: 'è‚‰' },
            'çš®': { pronunciation: 'pÃ­', meaning: 'çš®è‚¤' },
            'æ¯›': { pronunciation: 'mÃ¡o', meaning: 'æ¯›å‘' },
            'èº«': { pronunciation: 'shÄ“n', meaning: 'èº«ä½“' },
            'å¤´': { pronunciation: 'tÃ³u', meaning: 'å¤´éƒ¨' },
            'è¶³': { pronunciation: 'zÃº', meaning: 'è„š' },
            'ç«‹': { pronunciation: 'lÃ¬', meaning: 'ç«™ç«‹' },
            'è§': { pronunciation: 'jiÃ n', meaning: 'çœ‹è§' },
            'è¨€': { pronunciation: 'yÃ¡n', meaning: 'è¯´è¯' },
            'æ­¢': { pronunciation: 'zhÇ', meaning: 'åœæ­¢' },
            'åˆ€': { pronunciation: 'dÄo', meaning: 'åˆ€' },
            'å¼“': { pronunciation: 'gÅng', meaning: 'å¼“' },
            'çŸ¢': { pronunciation: 'shÇ', meaning: 'ç®­' },
            'ç½‘': { pronunciation: 'wÇng', meaning: 'ç½‘' },
            'å…„': { pronunciation: 'xiÅng', meaning: 'å“¥å“¥' },
            'å¼Ÿ': { pronunciation: 'dÃ¬', meaning: 'å¼Ÿå¼Ÿ' },
            'é’': { pronunciation: 'qÄ«ng', meaning: 'é’è‰²' },
            'å±®': { pronunciation: 'chÃ¨', meaning: 'è‰æœ¨åˆç”Ÿ' },
            'è‡ª': { pronunciation: 'zÃ¬', meaning: 'è‡ªå·±' },
            'ç‰™': { pronunciation: 'yÃ¡', meaning: 'ç‰™é½¿' },
            'å·¥': { pronunciation: 'gÅng', meaning: 'å·¥ä½œ' },
            'å‚': { pronunciation: 'chÇng', meaning: 'å·¥å‚' },
            'çˆª': { pronunciation: 'zhÇo', meaning: 'çˆªå­' },
            'å†…': { pronunciation: 'nÃ¨i', meaning: 'é‡Œé¢' },
            'å¤–': { pronunciation: 'wÃ i', meaning: 'å¤–é¢' },
            'å·': { pronunciation: 'chuÄn', meaning: 'æ²³æµ' },
            'äº•': { pronunciation: 'jÇng', meaning: 'æ°´äº•' },
            'é±¼': { pronunciation: 'yÃº', meaning: 'é±¼' }
        };
        
        // æ˜¾ç¤ºæŒ‡å®šå¹´é¾„æ®µ
        function showAge(age) {
            // éšè—æ‰€æœ‰å¹´é¾„æ®µ
            document.querySelectorAll('.age-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeçŠ¶æ€
            document.querySelectorAll('.age-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„å¹´é¾„æ®µ
            document.getElementById(`age-${age}`).classList.add('active');
            
            // æ¿€æ´»å¯¹åº”æŒ‰é’®ï¼ˆé€šè¿‡å¹´é¾„æŸ¥æ‰¾å¯¹åº”æŒ‰é’®ï¼‰
            const targetBtn = document.querySelector(`button[onclick="showAge(${age})"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
        }
        
        // åˆ›å»ºæ±‰å­—å¡ç‰‡
        function createCharacterCard(char) {
            const info = characterInfo[char] || { pronunciation: '', meaning: '' };
            return `
                <div class="character-card" onclick="goToChar('${char}')">
                    <div class="character-display">${char}</div>
                    <div class="character-info">
                        <div class="character-pronunciation">${info.pronunciation}</div>
                        <div class="character-meaning">${info.meaning}</div>
                    </div>
                </div>
            `;
        }
        
        // è·³è½¬åˆ°å­—ç¬¦ç»ƒä¹ é¡µé¢
        function goToChar(char) {
            // æ‰¾åˆ°å½“å‰å­—ç¬¦æ‰€å±çš„å¹´é¾„ç»„
            let currentAge = null;
            for (const [age, characters] of Object.entries(ageCharacters)) {
                if (characters.includes(char)) {
                    currentAge = age;
                    break;
                }
            }
            
            // ä¿å­˜å½“å‰å¹´é¾„ç»„åˆ°localStorage
            if (currentAge) {
                localStorage.setItem('currentAge', currentAge);
            }
            
            window.location.href = `char.html?c=${encodeURIComponent(char)}`;
        }
        
        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            // ä¸ºæ¯ä¸ªå¹´é¾„æ®µç”Ÿæˆæ±‰å­—å¡ç‰‡
            Object.keys(ageCharacters).forEach(age => {
                const grid = document.getElementById(`grid-${age}`);
                const characters = ageCharacters[age];
                grid.innerHTML = characters.map(char => createCharacterCard(char)).join('');
            });
        }
        
        // éŸ³é¢‘æ§åˆ¶åŠŸèƒ½
        let bgmAudio;
        let volumeSlider;
        
        function initAudio() {
            bgmAudio = document.getElementById('bgmAudio');
            volumeSlider = document.getElementById('volumeSlider');
            
            // è¯¦ç»†çš„éŸ³é¢‘å…ƒç´ çŠ¶æ€æ£€æŸ¥
            console.log('ğŸµ éŸ³é¢‘åˆå§‹åŒ–å¼€å§‹...');
            console.log('bgmAudioå…ƒç´ :', bgmAudio);
            console.log('éŸ³é¢‘æ–‡ä»¶è·¯å¾„:', bgmAudio ? bgmAudio.src : 'æœªæ‰¾åˆ°');
            console.log('éŸ³é¢‘readyState:', bgmAudio ? bgmAudio.readyState : 'æœªçŸ¥');
            console.log('éŸ³é¢‘networkState:', bgmAudio ? bgmAudio.networkState : 'æœªçŸ¥');
            console.log('éŸ³é¢‘pausedçŠ¶æ€:', bgmAudio ? bgmAudio.paused : 'æœªçŸ¥');
            console.log('éŸ³é¢‘mutedçŠ¶æ€:', bgmAudio ? bgmAudio.muted : 'æœªçŸ¥');
            
            // ä»localStorageæ¢å¤éŸ³é‡è®¾ç½®
            const savedVolume = localStorage.getItem('oracleAudioVolume');
            const volume = savedVolume !== null ? Math.max(parseInt(savedVolume), 10) : 50; // ç¡®ä¿éŸ³é‡è‡³å°‘ä¸º10
            
            // è®¾ç½®éŸ³é‡
            volumeSlider.value = volume;
            bgmAudio.volume = volume / 100;
            
            console.log('é¦–é¡µæ¢å¤éŸ³é‡è®¾ç½®:', volume);
            console.log('å®é™…è®¾ç½®çš„éŸ³é‡å€¼:', bgmAudio.volume);
            
            // éŸ³é‡æ»‘å—äº‹ä»¶
            volumeSlider.addEventListener('input', function() {
                const volume = this.value / 100;
                bgmAudio.volume = volume;
                
                // ä¿å­˜éŸ³é‡è®¾ç½®åˆ°localStorage
                localStorage.setItem('oracleAudioVolume', this.value);
            });
            
            // æ’­æ”¾æŒ‰é’®å·²åˆ é™¤ï¼Œç°åœ¨ä¾èµ–è‡ªåŠ¨æ’­æ”¾æœºåˆ¶
            
            // æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹
            const userAgent = navigator.userAgent.toLowerCase();
            const isFirefox = userAgent.indexOf('firefox') > -1;
            const isChrome = userAgent.indexOf('chrome') > -1;
            const isSafari = userAgent.indexOf('safari') > -1 && !isChrome;
            const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent);
            
            console.log('ğŸŒ æµè§ˆå™¨æ£€æµ‹ç»“æœ:');
            console.log('Firefox:', isFirefox);
            console.log('Chrome:', isChrome);
            console.log('Safari:', isSafari);
            console.log('ç§»åŠ¨è®¾å¤‡:', isMobile);
            console.log('ç”¨æˆ·ä»£ç†:', userAgent);
            
            // æ£€æŸ¥éŸ³é¢‘æ”¯æŒ
            console.log('ğŸ”Š éŸ³é¢‘æ”¯æŒæ£€æµ‹:');
            console.log('AudioContextæ”¯æŒ:', !!(window.AudioContext || window.webkitAudioContext));
            console.log('HTML5 Audioæ”¯æŒ:', !!window.Audio);
            console.log('MP3æ ¼å¼æ”¯æŒ:', bgmAudio ? bgmAudio.canPlayType('audio/mpeg') : 'æœªçŸ¥');
            
            // æ£€æŸ¥æµè§ˆå™¨æƒé™å’Œè‡ªåŠ¨æ’­æ”¾ç­–ç•¥
            console.log('ğŸ” æµè§ˆå™¨æƒé™å’Œç­–ç•¥æ£€æµ‹:');
            
            // æ£€æŸ¥è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
            if ('permissions' in navigator) {
                navigator.permissions.query({name: 'autoplay'}).then(result => {
                    console.log('è‡ªåŠ¨æ’­æ”¾æƒé™çŠ¶æ€:', result.state);
                }).catch(e => {
                    console.log('æ— æ³•æŸ¥è¯¢è‡ªåŠ¨æ’­æ”¾æƒé™:', e);
                });
            } else {
                console.log('æµè§ˆå™¨ä¸æ”¯æŒæƒé™API');
            }
            
            // æ£€æŸ¥åª’ä½“ä¼šè¯APIæ”¯æŒ
            console.log('MediaSession APIæ”¯æŒ:', 'mediaSession' in navigator);
            
            // æ£€æŸ¥é¡µé¢æ˜¯å¦é€šè¿‡HTTPSè®¿é—®
            console.log('HTTPSåè®®:', location.protocol === 'https:');
            console.log('å½“å‰åè®®:', location.protocol);
            
            // æ£€æŸ¥ç”¨æˆ·æ¿€æ´»çŠ¶æ€
            if ('userActivation' in navigator) {
                console.log('ç”¨æˆ·æ¿€æ´»çŠ¶æ€:', navigator.userActivation.hasBeenActive);
                console.log('å½“å‰ç”¨æˆ·æ¿€æ´»:', navigator.userActivation.isActive);
            } else {
                console.log('æµè§ˆå™¨ä¸æ”¯æŒç”¨æˆ·æ¿€æ´»API');
            }
            
            // Firefoxç‰¹å®šçš„éŸ³é¢‘ä¸Šä¸‹æ–‡å¤„ç†
            let audioContext;
            
            if (isFirefox && window.AudioContext) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    console.log('FirefoxéŸ³é¢‘ä¸Šä¸‹æ–‡å·²åˆ›å»ºï¼ŒçŠ¶æ€:', audioContext.state);
                } catch (e) {
                    console.error('éŸ³é¢‘ä¸Šä¸‹æ–‡åˆ›å»ºå¤±è´¥:', e);
                }
            }
            
            // é‡æ–°åˆ›å»ºéŸ³é¢‘å…ƒç´ çš„å¤‡ç”¨ç­–ç•¥
        function recreateAudioElement() {
            console.log('ğŸ”„ é‡æ–°åˆ›å»ºéŸ³é¢‘å…ƒç´ ...');
            
            // ç§»é™¤æ—§çš„éŸ³é¢‘å…ƒç´ 
            if (bgmAudio && bgmAudio.parentNode) {
                bgmAudio.parentNode.removeChild(bgmAudio);
            }
            
            // åˆ›å»ºæ–°çš„éŸ³é¢‘å…ƒç´ 
            bgmAudio = document.createElement('audio');
            bgmAudio.id = 'bgmAudio';
            bgmAudio.loop = true;
            bgmAudio.preload = 'auto';
            const savedVol = localStorage.getItem('oracleAudioVolume');
            bgmAudio.volume = savedVol !== null ? Math.max(parseInt(savedVol), 10) / 100 : 0.5;
            
            // æ·»åŠ éŸ³é¢‘æº
            const source = document.createElement('source');
            source.src = 'audio/bgm.mp3';
            source.type = 'audio/mpeg';
            bgmAudio.appendChild(source);
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(bgmAudio);
            
            console.log('âœ… éŸ³é¢‘å…ƒç´ é‡æ–°åˆ›å»ºå®Œæˆ');
            
            // é‡æ–°æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            setupAudioEventListeners();
            
            // å°è¯•æ’­æ”¾
            setTimeout(() => {
                playAudio();
            }, 500);
        }
        
        // è®¾ç½®éŸ³é¢‘äº‹ä»¶ç›‘å¬å™¨
        function setupAudioEventListeners() {
            bgmAudio.addEventListener('loadstart', () => console.log('ğŸ”„ å¼€å§‹åŠ è½½éŸ³é¢‘'));
            bgmAudio.addEventListener('loadeddata', () => console.log('ğŸ“Š éŸ³é¢‘æ•°æ®åŠ è½½å®Œæˆ'));
            bgmAudio.addEventListener('canplay', () => console.log('â–¶ï¸ éŸ³é¢‘å¯ä»¥å¼€å§‹æ’­æ”¾'));
            bgmAudio.addEventListener('canplaythrough', () => console.log('ğŸµ éŸ³é¢‘å¯ä»¥å®Œæ•´æ’­æ”¾'));
            bgmAudio.addEventListener('play', () => console.log('ğŸ¶ éŸ³é¢‘å¼€å§‹æ’­æ”¾'));
            bgmAudio.addEventListener('playing', () => console.log('ğŸµ éŸ³é¢‘æ­£åœ¨æ’­æ”¾'));
            bgmAudio.addEventListener('pause', () => console.log('â¸ï¸ éŸ³é¢‘æš‚åœ'));
            bgmAudio.addEventListener('ended', () => console.log('ğŸ”š éŸ³é¢‘æ’­æ”¾ç»“æŸ'));
            bgmAudio.addEventListener('error', (e) => {
                console.error('âŒ éŸ³é¢‘é”™è¯¯äº‹ä»¶:', e);
                console.error('é”™è¯¯è¯¦æƒ…:', bgmAudio.error);
            });
            bgmAudio.addEventListener('stalled', () => console.warn('âš ï¸ éŸ³é¢‘åŠ è½½åœæ»'));
            bgmAudio.addEventListener('waiting', () => console.warn('â³ éŸ³é¢‘ç¼“å†²ä¸­'));
        }
        
        // å¼ºåˆ¶æ’­æ”¾ç­–ç•¥ï¼ˆå¤šç§æ–¹æ³•å°è¯•ï¼‰
        function forcePlayAudio() {
            console.log('ğŸ’ª å¯ç”¨å¼ºåˆ¶æ’­æ”¾ç­–ç•¥...');
            
            const strategies = [
                // ç­–ç•¥1ï¼šç›´æ¥æ’­æ”¾
                () => {
                    console.log('ç­–ç•¥1ï¼šç›´æ¥æ’­æ”¾');
                    return bgmAudio.play();
                },
                // ç­–ç•¥2ï¼šé‡ç½®åæ’­æ”¾
                () => {
                    console.log('ç­–ç•¥2ï¼šé‡ç½®åæ’­æ”¾');
                    bgmAudio.currentTime = 0;
                    return bgmAudio.play();
                },
                // ç­–ç•¥3ï¼šåŠ è½½åæ’­æ”¾
                () => {
                    console.log('ç­–ç•¥3ï¼šåŠ è½½åæ’­æ”¾');
                    bgmAudio.load();
                    return new Promise((resolve, reject) => {
                        bgmAudio.addEventListener('canplay', () => {
                            bgmAudio.play().then(resolve).catch(reject);
                        }, { once: true });
                    });
                },
                // ç­–ç•¥4ï¼šé‡æ–°åˆ›å»ºå…ƒç´ 
                () => {
                    console.log('ç­–ç•¥4ï¼šé‡æ–°åˆ›å»ºå…ƒç´ ');
                    recreateAudioElement();
                    return new Promise((resolve) => {
                        setTimeout(() => {
                            bgmAudio.play().then(resolve).catch(() => resolve());
                        }, 1000);
                    });
                }
            ];
            
            let currentStrategy = 0;
            
            function tryNextStrategy() {
                if (currentStrategy >= strategies.length) {
                    console.error('ğŸ’¥ æ‰€æœ‰æ’­æ”¾ç­–ç•¥éƒ½å¤±è´¥äº†');
                    return;
                }
                
                const strategy = strategies[currentStrategy++];
                const result = strategy();
                
                if (result && typeof result.then === 'function') {
                    result.then(() => {
                        console.log(`âœ… ç­–ç•¥${currentStrategy}æˆåŠŸï¼`);
                    }).catch((error) => {
                        console.log(`âŒ ç­–ç•¥${currentStrategy}å¤±è´¥:`, error.message);
                        setTimeout(tryNextStrategy, 1000);
                    });
                } else {
                    setTimeout(tryNextStrategy, 1000);
                }
            }
            
            tryNextStrategy();
        }
        
        // å¼ºåŒ–çš„ç”¨æˆ·äº¤äº’è§¦å‘é€»è¾‘
            const playAudio = async () => {
                console.log('ğŸ¯ å¼€å§‹å°è¯•æ’­æ”¾éŸ³é¢‘...');
                console.log('å½“å‰éŸ³é¢‘çŠ¶æ€ - paused:', bgmAudio.paused, 'ended:', bgmAudio.ended);
                console.log('å½“å‰éŸ³é¢‘æ—¶é—´:', bgmAudio.currentTime, 'æ€»æ—¶é•¿:', bgmAudio.duration);
                
                try {
                    // Firefoxç‰¹å®šå¤„ç†ï¼šç¡®ä¿éŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¿€æ´»
                    if (isFirefox && audioContext) {
                        console.log('FirefoxéŸ³é¢‘ä¸Šä¸‹æ–‡å½“å‰çŠ¶æ€:', audioContext.state);
                        if (audioContext.state === 'suspended') {
                            await audioContext.resume();
                            console.log('âœ… FirefoxéŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¢å¤åˆ°:', audioContext.state);
                        }
                    }
                    
                    // é‡æ–°åŠ è½½éŸ³é¢‘ä»¥ç¡®ä¿Firefoxå…¼å®¹æ€§
                    console.log('ğŸ”„ é‡æ–°åŠ è½½éŸ³é¢‘æ–‡ä»¶...');
                    bgmAudio.load();
                    
                    // ç­‰å¾…éŸ³é¢‘åŠ è½½å®Œæˆ
                    console.log('â³ ç­‰å¾…éŸ³é¢‘åŠ è½½å®Œæˆ...');
                    await new Promise((resolve, reject) => {
                        const onCanPlay = () => {
                            console.log('âœ… éŸ³é¢‘åŠ è½½å®Œæˆï¼ŒreadyState:', bgmAudio.readyState);
                            resolve();
                        };
                        const onError = (e) => {
                            console.error('âŒ éŸ³é¢‘åŠ è½½å¤±è´¥:', e);
                            console.error('éŸ³é¢‘é”™è¯¯è¯¦æƒ…:', bgmAudio.error);
                            reject(e);
                        };
                        
                        bgmAudio.addEventListener('canplaythrough', onCanPlay, { once: true });
                        bgmAudio.addEventListener('error', onError, { once: true });
                        setTimeout(() => {
                            console.warn('âš ï¸ éŸ³é¢‘åŠ è½½è¶…æ—¶');
                            reject(new Error('éŸ³é¢‘åŠ è½½è¶…æ—¶'));
                        }, 5000); // 5ç§’è¶…æ—¶
                    });
                    
                    console.log('ğŸµ å°è¯•æ’­æ”¾éŸ³é¢‘...');
                    const playPromise = bgmAudio.play();
                    if (playPromise !== undefined) {
                        await playPromise;
                        console.log('ğŸ‰ èƒŒæ™¯éŸ³ä¹æ’­æ”¾æˆåŠŸï¼');
                        console.log('æ’­æ”¾åçŠ¶æ€ - paused:', bgmAudio.paused, 'volume:', bgmAudio.volume);
                    } else {
                        console.warn('âš ï¸ play()æ–¹æ³•è¿”å›undefined');
                    }
                } catch (error) {
                    console.error('âŒ éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                    console.error('é”™è¯¯ç±»å‹:', error.name);
                    console.error('é”™è¯¯æ¶ˆæ¯:', error.message);
                    console.error('éŸ³é¢‘å…ƒç´ é”™è¯¯:', bgmAudio.error);
                    
                    // åˆ†æå…·ä½“çš„æ’­æ”¾å¤±è´¥åŸå› 
                    if (error.name === 'NotAllowedError') {
                        console.error('ğŸš« æµè§ˆå™¨é˜»æ­¢äº†è‡ªåŠ¨æ’­æ”¾ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’');
                    } else if (error.name === 'NotSupportedError') {
                        console.error('ğŸš« éŸ³é¢‘æ ¼å¼ä¸æ”¯æŒ');
                        // å°è¯•é‡æ–°åˆ›å»ºéŸ³é¢‘å…ƒç´ 
                        recreateAudioElement();
                    } else if (error.name === 'AbortError') {
                        console.error('ğŸš« æ’­æ”¾è¢«ä¸­æ­¢');
                    }
                    
                    // é‡è¯•æœºåˆ¶
                    console.log('ğŸ”„ 1ç§’åå°è¯•é‡è¯•æ’­æ”¾...');
                    setTimeout(() => {
                        console.log('ğŸ”„ æ‰§è¡Œé‡è¯•æ’­æ”¾...');
                        bgmAudio.play().then(() => {
                            console.log('âœ… é‡è¯•æ’­æ”¾æˆåŠŸ');
                        }).catch(e => {
                            console.error('âŒ é‡è¯•æ’­æ”¾å¤±è´¥:', e);
                            // å¦‚æœé‡è¯•å¤±è´¥ï¼Œå¯ç”¨å¼ºåˆ¶æ’­æ”¾ç­–ç•¥
                            forcePlayAudio();
                        });
                    }, 1000);
                }
            };
            
            // æ·»åŠ éŸ³é¢‘äº‹ä»¶ç›‘å¬å™¨æ¥ç›‘æ§çŠ¶æ€
            setupAudioEventListeners();
            
            // ç«‹å³å°è¯•è‡ªåŠ¨æ’­æ”¾
            console.log('ğŸš€ å¼€å§‹è‡ªåŠ¨æ’­æ”¾å°è¯•...');
            playAudio();
            
            // æ·»åŠ å¤šç§ç”¨æˆ·äº¤äº’äº‹ä»¶ç›‘å¬ - æ›´ç§¯æçš„è§¦å‘ç­–ç•¥
            const interactionEvents = ['click', 'touchstart', 'touchend', 'keydown', 'mousedown', 'pointerdown', 'mousemove', 'scroll'];
            let interactionTriggered = false;
            
            const playOnInteraction = (event) => {
                if (interactionTriggered) return;
                interactionTriggered = true;
                
                console.log('ğŸ‘† ç”¨æˆ·äº¤äº’è§¦å‘éŸ³é¢‘æ’­æ”¾:', event.type);
                playAudio();
                
                // ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
                interactionEvents.forEach(eventType => {
                    document.removeEventListener(eventType, playOnInteraction);
                });
            };
            
            // ç«‹å³æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            interactionEvents.forEach(event => {
                document.addEventListener(event, playOnInteraction, { once: true, passive: true });
            });
            
            // å»¶è¿Ÿ500msåå†æ¬¡å°è¯•æ’­æ”¾ï¼ˆç»™æµè§ˆå™¨æ›´å¤šæ—¶é—´å‡†å¤‡ï¼‰
            setTimeout(() => {
                if (bgmAudio.paused) {
                    console.log('ğŸ”„ å»¶è¿Ÿ500msåå†æ¬¡å°è¯•è‡ªåŠ¨æ’­æ”¾');
                    playAudio();
                }
            }, 500);
            
            // å»¶è¿Ÿ1ç§’åå†æ¬¡å°è¯•æ’­æ”¾
            setTimeout(() => {
                if (bgmAudio.paused) {
                    console.log('ğŸ”„ å»¶è¿Ÿ1ç§’åå†æ¬¡å°è¯•è‡ªåŠ¨æ’­æ”¾');
                    playAudio();
                }
            }, 1000);
            
            // æ·»åŠ é¡µé¢å¯è§æ€§å˜åŒ–ç›‘å¬
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden && bgmAudio.paused) {
                    console.log('ğŸ‘ï¸ é¡µé¢é‡æ–°å¯è§ï¼Œå°è¯•æ¢å¤éŸ³é¢‘æ’­æ”¾');
                    playAudio();
                }
            });
            
            // Firefoxç‰¹å®šçš„é¢å¤–è§¦å‘ç­–ç•¥
            if (isFirefox) {
                console.log('ğŸ¦Š å¯ç”¨Firefoxç‰¹å®šéŸ³é¢‘ç­–ç•¥');
                
                // å»¶è¿Ÿæ’­æ”¾ç­–ç•¥
                setTimeout(() => {
                    if (bgmAudio.paused) {
                        console.log('ğŸ¦Š Firefoxå»¶è¿Ÿæ’­æ”¾å°è¯•');
                        playAudio();
                    }
                }, 2000);
                
                // é¼ æ ‡ç§»åŠ¨è§¦å‘
                let mouseMoveTriggered = false;
                document.addEventListener('mousemove', () => {
                    if (!mouseMoveTriggered && bgmAudio.paused) {
                        mouseMoveTriggered = true;
                        console.log('ğŸ¦Š Firefoxé¼ æ ‡ç§»åŠ¨è§¦å‘éŸ³é¢‘');
                        playAudio();
                    }
                }, { once: true });
                
                // æ»šåŠ¨è§¦å‘
                let scrollTriggered = false;
                document.addEventListener('scroll', () => {
                    if (!scrollTriggered && bgmAudio.paused) {
                        scrollTriggered = true;
                        console.log('ğŸ¦Š Firefoxæ»šåŠ¨è§¦å‘éŸ³é¢‘');
                        playAudio();
                    }
                }, { once: true });
            }
            
            // å®šæœŸæ£€æŸ¥éŸ³é¢‘çŠ¶æ€
             const audioStatusChecker = setInterval(() => {
                 if (bgmAudio.paused && !bgmAudio.ended) {
                     console.log('ğŸ” å®šæœŸæ£€æŸ¥ï¼šéŸ³é¢‘å¤„äºæš‚åœçŠ¶æ€ï¼Œå°è¯•æ’­æ”¾');
                     playAudio();
                 } else if (!bgmAudio.paused) {
                     console.log('âœ… å®šæœŸæ£€æŸ¥ï¼šéŸ³é¢‘æ­£åœ¨æ’­æ”¾ï¼Œåœæ­¢æ£€æŸ¥');
                     clearInterval(audioStatusChecker);
                 }
             }, 3000); // æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡
             
             // 10ç§’åå¦‚æœè¿˜æ²¡æ’­æ”¾æˆåŠŸï¼Œå¯ç”¨å¼ºåˆ¶æ’­æ”¾ç­–ç•¥
             setTimeout(() => {
                 if (bgmAudio.paused) {
                     console.log('â° 10ç§’åä»æœªæ’­æ”¾ï¼Œå¯ç”¨å¼ºåˆ¶æ’­æ”¾ç­–ç•¥');
                     forcePlayAudio();
                 }
                 clearInterval(audioStatusChecker);
                 console.log('â° åœæ­¢å®šæœŸéŸ³é¢‘çŠ¶æ€æ£€æŸ¥');
             }, 10000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initPage();
            initAudio();
            
            // æ¢å¤ä¹‹å‰ä¿å­˜çš„å¹´é¾„ç»„çŠ¶æ€
            const savedAge = localStorage.getItem('currentAge');
            if (savedAge && ageCharacters[savedAge]) {
                console.log(`æ¢å¤å¹´é¾„ç»„çŠ¶æ€: ${savedAge}å²`);
                showAge(parseInt(savedAge));
            }
        });
    </script>
</body>
</html>