<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字体内容测试</title>
    <style>
        @font-face {
            font-family: 'FangZhengOracle';
            src: url('./fonts/FangZhengOracle.ttf') format('truetype');
            font-display: swap;
        }
        
        @font-face {
            font-family: 'ZhongYanYuan';
            src: url('./fonts/ZhongYanYuan.ttf') format('truetype');
            font-display: swap;
        }
        
        @font-face {
            font-family: 'OeasyOracle';
            src: url('./fonts/OeasyOracle.ttf') format('truetype');
            font-display: swap;
        }
        
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f0f0;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .font-test {
            font-size: 72px;
            margin: 10px 0;
            text-align: center;
            border: 2px solid #ddd;
            padding: 20px;
        }
        
        .fangzheng {
            font-family: 'FangZhengOracle', serif;
        }
        
        .zhongyan {
            font-family: 'ZhongYanYuan', serif;
        }
        
        .oeasy {
            font-family: 'OeasyOracle', serif;
        }
        
        .serif-only {
            font-family: serif;
        }
        
        .comparison {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
        }
        
        .char-box {
            border: 2px solid #333;
            padding: 20px;
            font-size: 100px;
            background: white;
            text-align: center;
            min-width: 150px;
        }
        
        .info {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>字体内容测试 - "马"字</h1>
    
    <div class="test-container">
        <h2>单独字体测试</h2>
        <div class="font-test fangzheng">马</div>
        <div class="info">FangZhengOracle字体</div>
        
        <div class="font-test zhongyan">马</div>
        <div class="info">ZhongYanYuan字体</div>
        
        <div class="font-test oeasy">马</div>
        <div class="info">OeasyOracle字体</div>
        
        <div class="font-test serif-only">马</div>
        <div class="info">纯serif字体（对比用）</div>
    </div>
    
    <div class="test-container">
        <h2>并排对比</h2>
        <div class="comparison">
            <div>
                <div class="char-box fangzheng">马</div>
                <div class="info">FangZhengOracle</div>
            </div>
            <div>
                <div class="char-box zhongyan">马</div>
                <div class="info">ZhongYanYuan</div>
            </div>
            <div>
                <div class="char-box oeasy">马</div>
                <div class="info">OeasyOracle</div>
            </div>
            <div>
                <div class="char-box serif-only">马</div>
                <div class="info">serif</div>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>Canvas测试</h2>
        <canvas id="testCanvas" width="800" height="400" style="border: 1px solid #ccc;"></canvas>
        <div class="info">Canvas绘制测试，检查字体是否真的被应用</div>
    </div>
    
    <script>
        // Canvas测试
        const canvas = document.getElementById('testCanvas');
        const ctx = canvas.getContext('2d');
        
        // 等待字体加载
        document.fonts.ready.then(() => {
            console.log('所有字体已加载完成');
            
            // 清除画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 测试不同字体
            const fonts = [
                { name: 'FangZhengOracle', x: 100 },
                { name: 'ZhongYanYuan', x: 300 },
                { name: 'OeasyOracle', x: 500 },
                { name: 'serif', x: 700 }
            ];
            
            fonts.forEach(fontInfo => {
                ctx.font = `100px "${fontInfo.name}", serif`;
                ctx.fillStyle = 'black';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('马', fontInfo.x, 200);
                
                // 添加标签
                ctx.font = '16px Arial';
                ctx.fillText(fontInfo.name, fontInfo.x, 350);
                
                console.log(`绘制字体: ${fontInfo.name}`);
            });
            
            // 检查字体是否真的被应用
            fonts.slice(0, 3).forEach(fontInfo => {
                const isLoaded = document.fonts.check(`100px "${fontInfo.name}"`);
                console.log(`字体 ${fontInfo.name} 加载状态: ${isLoaded}`);
            });
        });
        
        // 监听字体加载事件
        document.fonts.addEventListener('loadingdone', (event) => {
            console.log('字体加载完成事件触发');
            event.fontfaces.forEach(fontface => {
                console.log(`字体加载完成: ${fontface.family}`);
            });
        });
        
        document.fonts.addEventListener('loadingerror', (event) => {
            console.log('字体加载失败事件触发');
            event.fontfaces.forEach(fontface => {
                console.log(`字体加载失败: ${fontface.family}`);
            });
        });
    </script>
</body>
</html>